---
// Our Customers page (French) - REFACTORED
import BaseLayout from '../../layouts/BaseLayout.astro';
import NewHeader from '../../components/NewHeader.astro';
import NewFooter from '../../components/NewFooter.astro';
import SubNavigation from '../../components/SubNavigation.astro';
import HeroMultiTemplate from '../../components/HeroMultiTemplate.astro';
import ServicesCarousel from '../../components/ServicesCarousel.astro';
import { fr } from '../../content/fr';
import { footerData } from '../../content/footer';

// Sub-navigation items (French)
const subNavItems = [
  { text: fr.nav.about, href: '/about/overview/' },
  { text: fr.nav.ourStory, href: '/about/our-story/' },
  { text: fr.nav.ourPeople, href: '/about/our-people/' },
  { text: fr.nav.ourValues, href: '/about/our-values/' },
  { text: fr.nav.ourCulture, href: '/about/our-culture/' },
  { text: fr.nav.ourCustomers, href: '/about/our-customers/' },
  { text: fr.nav.ourLocations, href: '/about/our-locations/' },
];

// Map testimonials to carousel slides
const testimonialSlides = fr.ourCustomers.testimonials.map(t => ({
  title: t.company,
  description: `<p>"${t.quote}"</p><p><strong>${t.speaker.name}</strong>, ${t.speaker.title}</p>`,
  imageUrl: "/assets/cogesto-asset/Cogesto_conference_ 3 guys.jpg", // Generic placeholder for now
  imageAlt: t.company,
  buttonText: "Lire l'étude de cas",
  buttonHref: "#"
}));
---

<BaseLayout title="Nos clients - Cogesto Consulting">
  
  <NewHeader />

  <main class="content start">
    
    <HeroMultiTemplate
      title={fr.ourCustomers.hero.title}
      subtitle={fr.ourCustomers.hero.description}
      imageUrl="/assets/cogesto-asset/Fresque_ongoing_buidling_ architectural.jpg"
      backgroundColor="primary-color"
    />

    <SubNavigation items={subNavItems} currentPage={Astro.url.pathname} />

    <ServicesCarousel
      title="Témoignages Clients"
      introText="<p>Découvrez comment nous aidons nos clients à relever leurs défis les plus complexes.</p>"
      slides={testimonialSlides}
    />

  </main>

  <NewFooter {...footerData} />

</BaseLayout>