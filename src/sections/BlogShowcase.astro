---
import { sanityClient } from '../utils/sanityClient'
import BlogPostCard from '../components/BlogPostCard.astro'

export interface Props {
  kicker?: string
  heading: string
  ctaButton?: {
    text: string
    url: string
  }
  featuredPosts?: any[]
}

const { kicker, heading, ctaButton, featuredPosts } = Astro.props

// If no featured posts provided, fetch recent posts
let posts = featuredPosts
if (!posts) {
  posts = await sanityClient.fetch(`*[_type == "post"] | order(publishedAt desc)[0...3]`)
}
---

<section class="py-16 bg-sick-light">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-12">
      {kicker && (
        <p class="text-sm font-semibold text-sick-blue uppercase tracking-wide mb-4">
          {kicker}
        </p>
      )}
      
      <h2 class="text-3xl sm:text-4xl font-bold text-sick-navy mb-6">
        {heading}
      </h2>
      
      {ctaButton && (
        <div class="mt-8">
          <a 
            href={ctaButton.url}
            class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-sick-blue hover:bg-blue-600 transition-colors duration-200"
          >
            {ctaButton.text}
          </a>
        </div>
      )}
    </div>
    
    <!-- Posts Grid -->
    {posts && posts.length > 0 && (
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {posts.map((post) => (
          <BlogPostCard post={post} />
        ))}
      </div>
    )}
  </div>
</section>

